<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<!-- GLOBAL SHUTTLESYNC UI -->
<link rel="stylesheet" href="../auth/header.css" />
<script src="../auth/sessionManager.js"></script>
<script src="../auth/header.js" defer></script>

<title>ShuttleSync — Baggage Status</title>

<style>
:root{
  --sk-blue:#022e64;
  --sk-accent:#5FC7CF;
  --sk-ink:#051a33;
  --sk-bg:#020b1a;
  --sk-card:#071225;
  --sk-card-soft:#0b1730;
  --sk-text:#eef3ff;
  --sk-muted:#8ea2c9;
  --sk-border:#122445;
  --radius:14px;
}

/* RESET */
*{
  margin:0; padding:0;
  box-sizing:border-box;
  font-family:"Montserrat",sans-serif;
  -webkit-tap-highlight-color:transparent;
}

body{
  background:var(--sk-bg);
  color:var(--sk-text);
  overflow:hidden;
  height:100vh;
  display:flex;
  flex-direction:column;
}

/* PAGE LAYOUT — below global header */
#ss-page-container{
  height: calc(100vh - 56px);
  display: flex;
  flex-direction: column;
}

#layout{
  flex:1;
  display:grid;
  grid-template-columns: 320px 1fr 420px;
  overflow:hidden;
  height:100%;
}

/* MOBILE */
@media(max-width:1100px){
  #layout{
    grid-template-columns: 1fr;
  }
  .panel-right, #rightPanel{display:none;}
}

@media(max-width:700px){
  #layout{
    grid-template-columns:1fr;
  }
  #leftPanel{display:none;}
}

/* PANELS */
.panel{
  overflow-y:auto;
  padding:20px;
  background:rgba(5,10,25,0.28);
  backdrop-filter:blur(22px);
  border-right:1px solid rgba(255,255,255,0.05);
}
.panel-right{
  border-right:none;
  border-left:1px solid rgba(255,255,255,0.05);
}

.section-title{
  font-size:14px;
  text-transform:uppercase;
  letter-spacing:.14em;
  color:var(--sk-muted);
  margin-bottom:12px;
}

/* CARDS */
.card{
  background:rgba(7,18,37,0.94);
  border-radius:var(--radius);
  padding:16px;
  border:1px solid rgba(255,255,255,0.08);
  box-shadow:0 0 18px rgba(0,0,0,0.45);
  margin-bottom:14px;
}

/* BHS LEFT PANEL */
.bhs-item{
  padding:14px;
  border-radius:var(--radius);
  background:var(--sk-card-soft);
  border:1px solid rgba(255,255,255,0.06);
  cursor:pointer;
  margin-bottom:10px;
  transition:.2s;
}
.bhs-item:hover{
  background:#0e1f38;
}

.bhs-top{
  display:flex;
  justify-content:space-between;
  margin-bottom:8px;
}

.bhs-flight{
  font-size:17px;
  font-weight:700;
}
.bhs-status{
  padding:5px 10px;
  border-radius:8px;
  font-size:12px;
  font-weight:600;
  border:1px solid rgba(255,255,255,0.15);
}
.st-arrived{background:#2b8a3e;color:#d1ffe0;}
.st-delayed{background:#b8860b;color:#fff3c4;}
.st-urgent{background:#a91515;color:#ffd7d7;}

.belt-bar{
  height:10px;
  background:#0f1e36;
  border-radius:8px;
  overflow:hidden;
  margin-top:8px;
}
.belt-fill{
  height:100%;
  background:var(--sk-accent);
  transition:.4s;
}

/* CENTER BELT MONITOR */
.belt-row{
  padding:14px;
  border-radius:var(--radius);
  margin-bottom:14px;
  background:var(--sk-card);
  border:1px solid rgba(255,255,255,0.08);
}

/* RIGHT AHL PANEL */
#ahl-search{
  display:flex;
  gap:8px;
  margin-bottom:12px;
}
.ahl-input{
  flex:1;
  padding:12px;
  border-radius:12px;
  background:#0c1a35;
  border:1px solid rgba(255,255,255,0.12);
  color:var(--sk-text);
}
.ahl-btn{
  padding:12px 18px;
  border-radius:12px;
  background:var(--sk-accent);
  color:#001b2c;
  font-weight:700;
  border:none;
  cursor:pointer;
}

.ahl-block{
  background:var(--sk-card-soft);
  padding:14px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,0.06);
  margin-bottom:12px;
}

.ahl-label{
  font-size:12px;
  color:var(--sk-muted);
  margin-bottom:4px;
}

</style>
</head>

<body>

<!-- GLOBAL SHUTTLESYNC HEADER -->
<div id="ss-header"
     data-title="Baggage Status"
     data-sub="Desktop • BHS • AHL • Belt Monitor">
</div>

<!-- PAGE CONTENT -->
<div id="ss-page-container">

  <div id="layout">

    <!-- LEFT PANEL -->
    <div id="leftPanel" class="panel">
      <div class="section-title">BHS — Flights</div>
      <div id="bhsList"></div>
    </div>

    <!-- CENTER PANEL -->
    <div id="centerPanel" class="panel">
      <div class="section-title">Arrival Belt Monitor</div>
      <div id="beltList"></div>
    </div>

    <!-- RIGHT PANEL -->
    <div id="rightPanel" class="panel panel-right">
      <div class="section-title">AHL (Lost / Damaged Bags)</div>

      <div id="ahl-search">
        <input id="ahlInput" class="ahl-input" placeholder="Search AHL case…" />
        <button class="ahl-btn" onclick="searchAHL()">Search</button>
      </div>

      <div id="ahlResult"></div>
    </div>

  </div>

</div>

<script>
/* MOCK DATA */
const BHS_DATA = [
  { flight:"SKD402", origin:"ARN", belt:"3", status:"ARRIVED", bagsExpected:148, bagsUnloaded:92 },
  { flight:"SKD187", origin:"JFK", belt:"7", status:"DELAYED", bagsExpected:201, bagsUnloaded:0 },
  { flight:"SKD988", origin:"LPA", belt:"5", status:"URGENT", bagsExpected:168, bagsUnloaded:25 }
];

const BELTS = [
  { belt:"3", load:62, msg:"Unloading in progress" },
  { belt:"5", load:15, msg:"Awaiting aircraft" },
  { belt:"7", load:0, msg:"No bags — Flight delayed" }
];

const AHL_CASES = {
  "ARN123456":{
    pax:"Jonas Bergström",
    flight:"SKD402",
    bagtag:"117-458921",
    status:"Forwarded to CHQ",
    history:[
      "ARN → CPH (Missed connection)",
      "Re-routed to CHQ",
      "Delivery ETA 20:20"
    ],
    contact:{ phone:"+46 70 555 12 22", address:"Blue Bay Resort 231, Chania" }
  }
};

/* BHS LEFT COLUMN */
function renderBHS(){
  const box = document.getElementById("bhsList");
  box.innerHTML = "";

  BHS_DATA.forEach(item=>{
    const pct = Math.min(100, Math.round(item.bagsUnloaded / item.bagsExpected * 100));
    const stClass =
      item.status==="ARRIVED" ? "st-arrived" :
      item.status==="DELAYED" ? "st-delayed" : "st-urgent";

    box.innerHTML += `
      <div class="bhs-item">
        <div class="bhs-top">
          <div class="bhs-flight">${item.flight} • ${item.origin}</div>
          <div class="bhs-status ${stClass}">${item.status}</div>
        </div>

        <div style="font-size:13px;color:var(--sk-muted);">
          Belt ${item.belt}<br>
          ${item.bagsUnloaded}/${item.bagsExpected} bags
        </div>

        <div class="belt-bar">
          <div class="belt-fill" style="width:${pct}%;"></div>
        </div>
      </div>
    `;
  });
}
renderBHS();

/* BELT MONITOR */
function renderBelts(){
  const box = document.getElementById("beltList");
  box.innerHTML = "";

  BELTS.forEach(b=>{
    box.innerHTML += `
      <div class="belt-row">
        <div style="font-size:18px;font-weight:700;">Belt ${b.belt}</div>
        <div style="color:var(--sk-muted);">${b.msg}</div>
        <div class="belt-bar" style="margin-top:10px;">
          <div class="belt-fill" style="width:${b.load}%"></div>
        </div>
      </div>
    `;
  });
}
renderBelts();

/* AHL SEARCH */
function searchAHL(){
  const key = document.getElementById("ahlInput").value.toUpperCase();
  const box = document.getElementById("ahlResult");

  if(!AHL_CASES[key]){
    box.innerHTML = `<div style="opacity:.5;">No case found.</div>`;
    return;
  }

  const c = AHL_CASES[key];

  box.innerHTML = `
    <div class="ahl-block">
      <div class="ahl-label">Passenger</div>
      ${c.pax}
    </div>

    <div class="ahl-block">
      <div class="ahl-label">Flight</div>
      ${c.flight}
    </div>

    <div class="ahl-block">
      <div class="ahl-label">Bag Tag</div>
      ${c.bagtag}
    </div>

    <div class="ahl-block">
      <div class="ahl-label">Status</div>
      ${c.status}
    </div>

    <div class="ahl-block">
      <div class="ahl-label">Routing History</div>
      ${c.history.map(h=>`• ${h}`).join("<br>")}
    </div>

    <div class="ahl-block">
      <div class="ahl-label">Contact</div>
      ${c.contact.phone}<br>${c.contact.address}
    </div>
  `;
}
</script>

</body>
</html>
