<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>DOCUNET OPS ADMIN</title>

<style>
/* =========================================
   SKANDI / ShuttleSync Dark Glass UI
========================================= */
:root {
  --sk-blue:#022e64;
  --sk-blue-soft:#083a7e;
  --sk-accent:#5fc7cf;
  --sk-bg:#020b1a;
  --sk-card:#071225;
  --sk-soft:#0a1630;
  --sk-border:#14233f;
  --sk-text:#f6f7fb;
  --sk-mute:#8d9aba;
  --radius:18px;
  --shadow:0 14px 40px rgba(0,0,0,0.45);
}
*{
  box-sizing:border-box;
  margin:0;
  padding:0;
  font-family:"Montserrat",sans-serif;
}
body{
  background:radial-gradient(circle at top,#142544,#020b1a 60%,#000 100%);
  color:var(--sk-text);
  height:100vh;
  display:flex;
}

/* =========================================
   LAYOUT
========================================= */
#panel{
  display:grid;
  grid-template-columns:280px 1fr;
  width:100%;
  height:100%;
  overflow:hidden;
}

/* =========================================
   SIDEBAR FOLDERS
========================================= */
#folders{
  background:rgba(10,20,40,0.55);
  backdrop-filter:blur(20px);
  border-right:1px solid var(--sk-border);
  padding:24px;
  display:flex;
  flex-direction:column;
  gap:22px;
  overflow-y:auto;
}
.folder-title{
  font-size:14px;
  opacity:.55;
  letter-spacing:1px;
}
.folder{
  padding:12px 14px;
  border-radius:var(--radius);
  cursor:pointer;
  transition:.2s;
  background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.05);
}
.folder:hover{
  background:rgba(255,255,255,0.07);
}
.folder.active{
  background:rgba(95,199,207,0.15);
  border-color:var(--sk-accent);
}

/* =========================================
   MAIN CONTENT
========================================= */
#main{
  padding:28px;
  overflow:auto;
  display:flex;
  flex-direction:column;
  gap:26px;
}

/* Search + Upload Bar */
#topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
}
#search{
  width:320px;
  padding:12px 16px;
  border-radius:var(--radius);
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(255,255,255,0.08);
  color:var(--sk-text);
}
#upload-btn{
  padding:12px 18px;
  border-radius:var(--radius);
  background:var(--sk-accent);
  color:#000;
  font-weight:700;
  cursor:pointer;
}

/* Documents Grid */
#docs-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:20px;
}
.doc{
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(255,255,255,0.08);
  border-radius:var(--radius);
  padding:18px;
  backdrop-filter:blur(18px);
  cursor:pointer;
  display:flex;
  flex-direction:column;
  gap:14px;
  position:relative;
}
.doc:hover{
  background:rgba(255,255,255,0.12);
}

/* Doc Icons */
.doc-icon{
  width:42px;
  height:42px;
  border-radius:10px;
  background:var(--sk-accent);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  color:#000;
  font-size:18px;
}

/* Doc Name */
.doc-name{
  font-size:15px;
  font-weight:600;
}

/* Actions */
.doc-actions{
  display:flex;
  gap:12px;
}
.doc-actions button{
  padding:6px 10px;
  border-radius:10px;
  font-size:12px;
  cursor:pointer;
  background:rgba(255,255,255,0.12);
  border:1px solid rgba(255,255,255,0.08);
  color:var(--sk-text);
}

/* Delete */
.doc-actions .del{
  background:rgba(255,60,60,0.3);
  border-color:rgba(255,60,60,0.4);
}

/* Drag handle */
.drag-handle{
  position:absolute;
  top:10px;
  right:10px;
  font-size:16px;
  opacity:.3;
  cursor:grab;
}
</style>
</head>

<body>

<div id="panel">

  <!-- ========================================= -->
  <!-- SIDEBAR FOLDERS -->
  <!-- ========================================= -->
  <div id="folders">
    <div class="folder-title">FOLDERS</div>

    <div class="folder active" data-folder="passenger">Passenger Booking & Service</div>
    <div class="folder" data-folder="internal">Internal / Operational</div>
    <div class="folder" data-folder="partner">Partner & Supplier</div>
    <div class="folder" data-folder="admin">Admin & Support</div>
  </div>


  <!-- ========================================= -->
  <!-- MAIN AREA -->
  <!-- ========================================= -->
  <div id="main">

    <!-- Top Bar -->
    <div id="topbar">
      <input id="search" placeholder="Search documents…">
      <button id="upload-btn">Upload Document</button>
      <input type="file" id="file-input" hidden>
    </div>

    <!-- Grid -->
    <div id="docs-grid"></div>

  </div>

</div>

<script>
/* ==========================================================
   BASIC LOCAL DATA STORE
   (Replace with Wix/Airtable connector later)
=========================================================== */
let docs = JSON.parse(localStorage.getItem("docunet_ops") || "{}");

if(!docs.passenger){ 
  docs = {
    passenger:[],
    internal:[],
    partner:[],
    admin:[]
  };
}

/* Save handler */
function save(){
  localStorage.setItem("docunet_ops",JSON.stringify(docs));
}

/* ==========================================================
   RENDER DOCUMENTS
=========================================================== */
const grid = document.getElementById("docs-grid");
let currentFolder = "passenger";

function render(){
  grid.innerHTML = "";
  let list = docs[currentFolder];

  list.forEach((doc, index)=>{
    let el = document.createElement("div");
    el.className = "doc";
    el.draggable = true;
    el.dataset.index = index;

    el.innerHTML = `
      <div class="drag-handle">☰</div>
      <div class="doc-icon">${doc.ext.toUpperCase()}</div>
      <div class="doc-name">${doc.name}</div>

      <div class="doc-actions">
        <button class="down">Download</button>
        <button class="rename">Rename</button>
        <button class="del">Delete</button>
      </div>
    `;

    /* Download */
    el.querySelector(".down").onclick = ()=>{
      const a = document.createElement("a");
      a.href = doc.url;
      a.download = doc.name+"."+doc.ext;
      a.click();
    };

    /* Rename */
    el.querySelector(".rename").onclick = ()=>{
      let newName = prompt("Rename document:", doc.name);
      if(newName){
        doc.name = newName;
        save(); render();
      }
    };

    /* Delete */
    el.querySelector(".del").onclick = ()=>{
      if(confirm("Delete this file?")){
        docs[currentFolder].splice(index,1);
        save(); render();
      }
    };

    /* Drag events */
    el.addEventListener("dragstart", dragStart);
    el.addEventListener("dragover", dragOver);
    el.addEventListener("drop", dropItem);

    grid.appendChild(el);
  });
}

/* ==========================================================
   DRAG & DROP REORDER
=========================================================== */
let dragIndex = null;

function dragStart(e){
  dragIndex = +e.target.dataset.index;
}
function dragOver(e){
  e.preventDefault();
}
function dropItem(e){
  const dropIndex = +e.target.closest(".doc").dataset.index;
  const arr = docs[currentFolder];
  
  const item = arr.splice(dragIndex,1)[0];
  arr.splice(dropIndex,0,item);

  save(); render();
}


/* ==========================================================
   FOLDER SWITCH
=========================================================== */
document.querySelectorAll(".folder").forEach(f=>{
  f.onclick = ()=>{
    document.querySelectorAll(".folder").forEach(x=>x.classList.remove("active"));
    f.classList.add("active");
    currentFolder = f.dataset.folder;
    render();
  };
});


/* ==========================================================
   UPLOAD DOCUMENT
=========================================================== */
document.getElementById("upload-btn").onclick = ()=>{
  document.getElementById("file-input").click();
};

document.getElementById("file-input").onchange = (e)=>{
  const file = e.target.files[0];
  if(!file) return;

  const reader = new FileReader();
  reader.onload = ev=>{
    const ext = file.name.split(".").pop().toLowerCase();
    const name = file.name.replace("."+ext,"");

    docs[currentFolder].push({
      name,
      ext,
      url:ev.target.result
    });

    save(); render();
  };
  reader.readAsDataURL(file);
};


/* ==========================================================
   SEARCH
=========================================================== */
document.getElementById("search").oninput = (e)=>{
  const q = e.target.value.toLowerCase();

  document.querySelectorAll(".doc").forEach(doc=>{
    const name = doc.querySelector(".doc-name").innerText.toLowerCase();
    doc.style.display = name.includes(q) ? "flex" : "none";
  });
};


/* Init */
render();
</script>

</body>
</html>
